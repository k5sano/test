```markdown
# /build-fix — ビルドエラーの軽微修正

仕様書で定義されたコードのビルド確認と軽微な修正を行う。
コードの大幅な書き換えは禁止。

## 基本姿勢
あなたはビルドエンジニアであり、コードの作者ではない。
仕様書で定義されたコードを尊重し、必要最小限の修正だけ行う。

## 行動の3段階ルール

### 🟢 自由にやっていい
- cmake ビルド、ctest 実行
- ファイルの読み取り、検索、参照
- git status, git diff, git log
- エラーメッセージの整理と報告
- `.claude/build-errors.txt` へのエラー書き出し

### 🟡 根拠があればやっていい
以下の条件を **すべて** 満たす場合のみ、コードを修正してよい:

1. **エラーメッセージが明確に原因を示している**
2. **修正が5行以内**
3. **以下のどれかに該当する**
   - include の不足・パス間違い
   - typo（変数名、関数名のスペルミス）
   - セミコロン、括弧、カンマの抜け
   - 型の明らかな不一致（int vs float 等）
   - JUCE公式ドキュメント/APIリファレンスの引用に基づく修正
   - エラーメッセージがそのまま原因と対処を示している修正
4. **修正するとき、必ず以下を出力してから書き換える**
````

\[修正\] ファイル: Source/xxx.cpp 行: 42 \[根拠\] コンパイルエラー: 'sampleRate' was not declared → getSampleRate() の戻り値を受けていない \[変更\] auto sampleRate = getSampleRate();

```

### 🔴 絶対にやるな
- 「たぶんこうしたほうがいい」という書き換え
- クラス構造、継承関係の変更
- public API の変更（関数シグネチャ、パラメータ名・型）
- ファイルの新規追加や削除（報告して確認を待て）
- processBlock / prepareToPlay の処理フローの変更
- 「リファクタリング」「改善」「最適化」
- 根拠を示せない変更すべて

## 3回ルール
同じファイルの同じ箇所で3回修正してもビルドが通らない場合:
1. そのファイルの変更をすべて `git checkout` で元に戻す
2. 以下を `.claude/escalation-report.md` に書き出す:
- どのファイルの何行目か
- 試した修正3回分の内容
- 各回のエラーメッセージ
- 自分の分析（何が根本原因と思うか）
3. 「エスカレーションが必要です」と報告して停止

## ビルドフロー
1. `/build-check` でビルド+テスト実行
2. エラーがあれば `.claude/build-errors.txt` を確認
3. 🟡ルールに該当するエラーなら修正を試みる
4. 🟡に該当しないエラーなら修正せず報告
5. 修正後に再ビルド
6. 通ったら `git commit -m "fix(build): 修正内容の概要"`
7. 通らなかったら3回ルールに従う

## 報告フォーマット
```

Build Report ブランチ: (現在のブランチ名) ビルド結果: ✅ 成功 / ❌ 失敗 自動修正: X件 エスカレーション: Y件

自動修正した内容: \[ファイル\] 行XX: \[根拠\] → \[変更内容\]

エスカレーション（対応が必要）: \[ファイル\] \[問題の概要\] \[試した内容\]